#tag_all login_logon_versions "*";

flag TestFlag : u16 {
    A = 1;
    B = 2;
    C = 4;
    D = 8;
    E = 16;
}

clogin TestStruct = 0xFF {
    TestFlag f;
    if (f & A) {
        u8 b_A1;
    } elseif (f & B) {
        u8 b_B1;
    }
    if (f & C) {
        u8 b_C1;
    }
    if (f & E) {
        u8 b_E1;
    }
}

test TestStruct {
    f = B | C | D;
    b_B1 = 1;
    b_C1 = 2;
} [
    0xFF, /* opcode */
    0x0E, 0x00, /* TestFlag */
    0x01, /* b_B1 */
    0x02, /* b_C1 */
]

test TestStruct {
    f = A | C | D;
    b_A1 = 1;
    b_C1 = 2;
} [
    0xFF, /* opcode */
    0x0D, 0x00, /* TestFlag */
    0x01, /* b_A1 */
    0x02, /* b_C1 */
]
